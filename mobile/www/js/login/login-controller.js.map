{"version":3,"names":[],"mappings":"","sources":["login/login-controller.js"],"sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  /**\r\n   * @ngdoc object\r\n   * @name login.controller:LoginCtrl\r\n   *\r\n   * @description\r\n   *\r\n   */\r\n  angular\r\n    .module('login')\r\n    .controller('LoginCtrl', LoginCtrl);\r\n\r\n  function LoginCtrl(urlBase, $rootScope, $http, LoginService, $ionicPopup) {\r\n\r\n    var self = this;\r\n\r\n    this.login_data = {};\r\n\r\n    LoginService.getSession().then(function (response) {\r\n\r\n      console.log(response)\r\n\r\n      self.cookie = response.data\r\n\r\n      localStorage['cookie'] =response.data;\r\n\r\n    });\r\n\r\n    this.logear = function () {\r\n\r\n      if (self.joining) return\r\n\r\n\r\n      self.joining = true\r\n\r\n      $rootScope.chatificator.emit('SessionStart', {\r\n\r\n        vii: self.cookie,\r\n\r\n        txt_usuario: self.login_data.user,\r\n\r\n        txt_password: self.login_data.password\r\n\r\n      }, function (a) {\r\n\r\n        self.joining = false\r\n\r\n        if (angular.equals(a.val, 1) || angular.equals(a.val, 2))\r\n          $ionicPopup.alert({\r\n            title: 'Usuario o Contraseña Incorrectos',\r\n            subTitle: 'Usuario o Contraseña Incorrectos'\r\n          });\r\n\r\n        else if (angular.equals(a.val, 3)) {\r\n\r\n          $rootScope.auth_user = a;\r\n\r\n          console.log(a)\r\n\r\n          localStorage['auth_user'] = JSON.stringify(a);\r\n\r\n          localStorage['cookie'] = 'node=' + a.cook + '--';\r\n\r\n          LoginService.afterLogged();\r\n\r\n        }\r\n\r\n      });\r\n\r\n    };\r\n\r\n  }\r\n}());\r\n"],"file":"login/login-controller.js","sourceRoot":"/source/"}